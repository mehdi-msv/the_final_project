{% extends 'base.html' %}
{% load static %}
{% load humanize %}
{% load blog_tags %}
<!DOCTYPE html>
{% block content %}
  <main class="main">
    <!-- Page Title -->
    <div class="page-title" data-aos="fade">
      <div class="heading">
        <div class="container">
          <div class="row d-flex justify-content-center text-center">
            <div class="col-lg-8">
              <h1>Blog</h1>
              <p class="mb-0">Odio et unde deleniti. Deserunt numquam exercitationem. Officiis quo odio sint voluptas consequatur ut a odio voluptatem. Sit dolorum debitis veritatis natus dolores. Quasi ratione sint. Sit quaerat ipsum dolorem.</p>
            </div>
          </div>
        </div>
      </div>
      <nav class="breadcrumbs">
        <div class="container">
          <ol>
            <li>
              <a href="{% url 'website:index' %}">Home</a>
            </li>
            <li class="current">Blog</li>
          </ol>
        </div>
      </nav>
    </div>
    <!-- End Page Title -->

    <!-- Blog Posts Section -->
    <div class="row" style="margin-left: 0px;">
      <section id="blog-posts" class="col-lg-8 blog-posts section">

        <div class="container">
          <div class="row gy-4">

            {% for post in posts %}

              <div class="col-lg-4">
                <article>
                  
                  <div class="post-img">
                    <img style="height:200px;max-width:280px;width: expression(this.width > 500 ? 500: true);" src="{{ post.image.url }}" alt="" class="img-fluid" />
                  </div>
                  {% for cat in post.category.all %}
                    <a href="{% url 'blog:category' cat_name=cat.name %}" class="post-category">{{ cat.name }}</a>{% if not forloop.last %},{% endif %}
                  {% endfor %}
                  <h2 class="title">
                    <a href="{% url 'blog:single' pid=post.id %}">{{ post.title }}</a>
                  </h2>
                  <p >{{ post.content|truncatewords_html:10|safe }}</p>
                  <div class="d-flex align-items-center">
                    <img src="{{post.profile.url}}" alt="" class="img-fluid post-author-img flex-shrink-0" />
                    <div class="post-meta">
                      <a href="{% url 'blog:author' author_user=post.author %}" class="post-author">{{post.author}}</a>
                      <p class="post-date">
                        <time datetime="2022-01-01">{{post.pub_date|naturalday}}</time>
                      </p>                 
                  </div>
                  </div>
                  <div class="header-card">
                    <p class="view"><i class="bi bi-eye"> {{post.counted_views}}</i></p> <!-- view post -->
                    <a href="{% url 'blog:single' pid=post.id %}" class="view-more">view more...</a> <!-- view more -->

                  </div>

                </article>
              </div>
              <!-- End post list item -->
            {% endfor %}
          </div>
        </div>
      </section>
      <!-- /Blog Posts Section -->
      <div class="col-lg-4 sidebar" style="width: 415px;">
        <div class="widgets-container">
          {% include 'blog/blog_search.html' %}

          {% postcategories %}

          {% blog_latest %}


          {% blog_tags %}
        </div>
      </div>
    </div>
    <!-- Blog Pagination Section -->
    <section id="blog-pagination" class="blog-pagination section">
      <div class="container">
        <div class="d-flex justify-content-center">
          <ul>
            {% if posts.has_previous %}
              <li>
                <a href="?page={{ posts.previous_page_number }}"><i class="bi bi-chevron-left"></i></a>
              </li>
            {% endif %}
            {% for page in posts.paginator.page_range %}
              {% if posts.number == page %}
                <li>
                  <a href="?page={{ page }}" class="active">{{ page }}</a>
                </li>
              {% else %}
                <li>
                  <a href="?page={{ page }}">{{ page }}</a>
                </li>
              {% endif %}
            {% endfor %}
            {% if post.has_next %}
              <li>
                <a href="?page={{ page }}"><i class="bi bi-chevron-right"></i></a>
              </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </section>
    <!-- /Blog Pagination Section -->
  </main>
{% endblock %}
